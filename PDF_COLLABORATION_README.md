# PDF Field Collaboration System

–ù–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –¥–≤–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –æ–¥–Ω–æ—á–∞—Å–Ω–æ —Ä–æ–∑—Å—Ç–∞–≤–ª—è—Ç–∏ –ø–æ–ª—è –Ω–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç—ñ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

## üîπ –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

1. **–†–µ–Ω–¥–µ—Ä PDF** - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î PDF.js –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
2. **–¢—É–ª–±–∞—Ä –∑ –ø–æ–ª—è–º–∏** - –°–ø—Ä–∞–≤–∞ —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏–π —Ç—É–ª–±–∞—Ä –∑ –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ (Text, Signature, Date, Checkbox, Select)
3. **–ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–∞ —Ä–µ—Å–∞–π–∑–∏–Ω–≥** - –ü–æ–ª—è –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Å—É–≤–∞—Ç–∏ –º–∏—à–µ—é —Ç–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä
4. **–†–µ–∞–ª—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Yjs –¥–ª—è –∫–æ–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
5. **–û–±–º–µ–∂–µ–Ω–Ω—è "—Ç—ñ–ª—å–∫–∏ –ø–æ –æ–¥–Ω–æ–º—É"** - –ö–æ–∂–Ω–µ –ø–æ–ª–µ –∑ —Ç—É–ª–±–∞—Ä–∞ –º–æ–∂–Ω–∞ —Ä–æ–∑—Å—Ç–∞–≤–∏—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑
6. **–§–ª–æ—É –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è** - –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –∫–Ω–æ–ø–∫—É "–ü–æ–≥–æ–¥–∂—É—é"
7. **–ï–∫—Å–ø–æ—Ä—Ç JSON** - –ü—ñ—Å–ª—è –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ –¥–∞–Ω—ñ –µ–∫—Å–ø–æ—Ä—Ç—É—é—Ç—å—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç

## üîπ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Frontend**: React, TypeScript, Tailwind CSS
- **PDF —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**: PDF.js
- **–ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è**: react-rnd
- **–†–µ–∞–ª—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è**: Yjs + WebSocket
- **Backend**: Node.js, Express, WebSocket

## üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
client/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PdfFieldCollaborator.tsx    # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç PDF –∫–æ–ª–∞–±–æ—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TestPdfCollaboration.tsx    # –¢–µ—Å—Ç–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ YjsContext.tsx               # Yjs –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pdfFields.ts                 # –¢–∏–ø–∏ –¥–ª—è PDF –ø–æ–ª—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îÇ       ‚îî‚îÄ‚îÄ pdfExport.ts                 # –§—É–Ω–∫—Ü—ñ—ó –µ–∫—Å–ø–æ—Ä—Ç—É JSON
server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                        # Express —Å–µ—Ä–≤–µ—Ä + WebSocket —Å–µ—Ä–≤–µ—Ä
```

## üîπ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
# –ö–ª—ñ—î–Ω—Ç
cd client
npm install

# –°–µ—Ä–≤–µ—Ä
cd server
npm install
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd server
npm run dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞:
- HTTP API: http://localhost:4000
- WebSocket: ws://localhost:1234

### 3. –ó–∞–ø—É—Å–∫ –∫–ª—ñ—î–Ω—Ç–∞

```bash
cd client
npm run dev
```

–ö–ª—ñ—î–Ω—Ç –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:5173

## üîπ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:5173
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Test as Notary (PDF Editor)" - –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –≤–∫–ª–∞–¥–∫–∞ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–æ–≤—É –≤–∫–ª–∞–¥–∫—É –∑ "Test as Client (PDF Viewer)" - –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –≤–∫–ª–∞–¥–∫–∞ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É
4. –£ –≤–∫–ª–∞–¥—Ü—ñ Notary:
   - –ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –ø–æ–ª—è –∑ —Ç—É–ª–±–∞—Ä–∞ –Ω–∞ PDF
   - –ü–µ—Ä–µ–º—ñ—â—É–π—Ç–µ —Ç–∞ –∑–º—ñ–Ω—é–π—Ç–µ —Ä–æ–∑–º—ñ—Ä –ø–æ–ª—ñ–≤
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Approve"
5. –£ –≤–∫–ª–∞–¥—Ü—ñ Client:
   - –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π—Ç–µ –∑–∞ –∑–º—ñ–Ω–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Approve"
6. –ü—ñ—Å–ª—è –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è –æ–±–æ—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ –∑'—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "Export Template"

## üîπ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ–∫—Å–ø–æ—Ä—Ç—É

```json
{
  "template": {
    "name": "Sample Local PDF_2025-10-01T09-44-57-204Z",
    "schema": [
      {
        "name": "Sample Local PDF.pdf",
        "attachment_uuid": "c78a37f8-7709-4d85-b5b8-a04545e22738"
      }
    ],
    "submitters": [
      {
        "name": "Client",
        "uuid": "a20d28bc-4ffe-4f3c-8948-0206e024adc8"
      },
      {
        "name": "Notary",
        "uuid": "fd67a470-114e-4794-8169-8ceb4de46d89"
      }
    ],
    "fields": [
      {
        "name": "date",
        "uuid": "d3e298d7-bd17-4914-ab4d-4737adcb5462",
        "submitter_uuid": "a20d28bc-4ffe-4f3c-8948-0206e024adc8",
        "required": false,
        "title": "Date",
        "default_value": "2025-10-01",
        "type": "date",
        "role": "Client",
        "preferences": {
          "format": "DD/MM/YYYY"
        },
        "areas": [
          {
            "x": 0.0742268,
            "y": 0.9411283,
            "page": 0,
            "attachment_uuid": "c78a37f8-7709-4d85-b5b8-a04545e22738",
            "w": 0.2,
            "h": 0.0285714
          }
        ]
      }
    ]
  }
}
```

## üîπ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

- **–ù–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏**: –í—Å—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –ø–æ–ª—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ 0-1 –≤—ñ–¥–Ω–æ—Å–Ω–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- **–†–µ–∞–ª—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Yjs –¥–ª—è –º–∏—Ç—Ç—î–≤–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑–º—ñ–Ω
- **–û–±–º–µ–∂–µ–Ω–Ω—è –ø–æ–ª—ñ–≤**: –ö–æ–∂–µ–Ω —Ç–∏–ø –ø–æ–ª—è –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑
- **–§–ª–æ—É –ø–æ–≥–æ–¥–∂–µ–Ω–Ω—è**: –í—Å—ñ —É—á–∞—Å–Ω–∏–∫–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–≥–æ–¥–∏—Ç–∏—Å—è –ø–µ—Ä–µ–¥ –µ–∫—Å–ø–æ—Ä—Ç–æ–º
- **Fallback –µ–∫—Å–ø–æ—Ä—Ç**: –Ø–∫—â–æ –±–µ–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π, –¥–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

## üîπ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: –î–æ–¥–∞—Ç–∏ PostgreSQL/MongoDB –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: –î–æ–¥–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
3. **–§–∞–π–ª–æ–≤–µ —Å—Ö–æ–≤–∏—â–µ**: –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ AWS S3 –∞–±–æ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–º —Å–µ—Ä–≤—ñ—Å–æ–º
4. **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –∑–º—ñ–Ω–∏
5. **–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω**: –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
